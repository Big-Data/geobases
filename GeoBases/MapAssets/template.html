<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html>

    <head>
        <title>Your Map: {{file_name}}</title>
        <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.min.js"></script>
        <script type="text/javascript"
            src="http://maps.google.com/maps/api/js?sensor=false">
        </script>
        <script type="text/javascript">


function initialize(jsonData) {
    // Set map options
    var myOptions = {
        zoom: 2,
        center: new google.maps.LatLng(10,0),
        mapTypeId: google.maps.MapTypeId.ROADMAP
    };
    // Create the map
    var map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);

    var n = jsonData.length;
    var best_icon = 'blue_point.png';
    if (n < 100) {
        best_icon = 'blue_marker.png';
    }
    for (var i=0 ; i<n ; i++) {
        var marker= new google.maps.Marker({
            position: new google.maps.LatLng(jsonData[i]['lat'],jsonData[i]['lng']),
            title: jsonData[i]['name'],
            icon: best_icon
        });
        marker.setMap(map);
    }
}


$(document).ready(function() {
    $("#map_canvas").css({
        "height": $(window).height()*0.90
    });
    $("#map_canvas").css({
        "width": $(window).width()*0.99
    }); 
    $.getJSON('{{json_file}}', function(json){initialize(json);});
}); 

        </script>
    </head>

    <body>
        <div id="map_canvas" style="width:1000px; height:700px"></div>
    </body>
</html>
